{"version":3,"file":"svelte-coordinate-conversion.esm.js","sources":["../src/svelte-coordinate-conversion.ts"],"sourcesContent":["//----------------------------------------------------------------------------//\n//                        Svelte Coordinate Conversion                        //\n//----------------------------------------------------------------------------//\n\n  type Position = { left:number, top:number }\n\n  function fromViewportTo (\n    System:'document'|'local', originalPosition:Position, Target?:Element\n  ):Position {\n    switch (true) {\n      case (originalPosition == null):\n        throw new Error('no \"Position\" given')\n      case (typeof originalPosition.left !== 'number') && ! (originalPosition.left as Number instanceof Number):\n      case (typeof originalPosition.top  !== 'number') && ! (originalPosition.top  as Number instanceof Number):\n        throw new Error('invalid \"Position\" given')\n    }\n\n    switch (System) {\n      case null: case undefined:\n        throw new Error('no coordinate system given')\n// @ts-ignore the following check is for non-TypeScript applications only\n      case 'viewport':\n        return { left:originalPosition.left, top:originalPosition.top }\n      case 'document':\n        return {\n          left:originalPosition.left + window.scrollX,\n          top:  originalPosition.top + window.scrollY\n        }\n      case 'local':\n        switch (true) {\n          case (Target == null):\n            throw new Error('no target element given')\n          case (Target instanceof Element):\n            let computedStyle = window.getComputedStyle(Target as Element)\n\n            let leftOffset = parseFloat(computedStyle.borderLeftWidth)\n            let topOffset  = parseFloat(computedStyle.borderTopWidth)\n\n            let TargetPositionInViewport = (Target as Element).getBoundingClientRect()\n            return {\n              left:originalPosition.left - TargetPositionInViewport.left - leftOffset,\n              top:  originalPosition.top - TargetPositionInViewport.top  - topOffset\n            }\n          default:\n            throw new Error('invalid target element given')\n        }\n      default:\n        throw new Error('invalid coordinate system given')\n    }\n  }\n\n  function fromDocumentTo (\n    System:'viewport'|'local', originalPosition:Position, Target?:Element\n  ):Position {\n    switch (true) {\n      case (originalPosition == null):\n        throw new Error('no \"Position\" given')\n      case (typeof originalPosition.left !== 'number') && ! (originalPosition.left as Number instanceof Number):\n      case (typeof originalPosition.top  !== 'number') && ! (originalPosition.top  as Number instanceof Number):\n        throw new Error('invalid \"Position\" given')\n    }\n\n    switch (System) {\n      case null: case undefined:\n        throw new Error('no coordinate system given')\n      case 'viewport':\n        return {\n          left:originalPosition.left - window.scrollX,\n          top:  originalPosition.top - window.scrollY\n        }\n// @ts-ignore the following check is for non-TypeScript applications only\n      case 'document':\n        return { left:originalPosition.left, top:originalPosition.top }\n      case 'local':\n        switch (true) {\n          case (Target == null):\n            throw new Error('no target element given')\n          case (Target instanceof Element):\n            let computedStyle = window.getComputedStyle(Target as Element)\n\n            let leftOffset = parseFloat(computedStyle.borderLeftWidth)\n            let topOffset  = parseFloat(computedStyle.borderTopWidth)\n\n            let TargetPositionInViewport = (Target as Element).getBoundingClientRect()\n            return {\n              left:originalPosition.left + window.scrollX - TargetPositionInViewport.left - leftOffset,\n              top:  originalPosition.top + window.scrollY - TargetPositionInViewport.top  - topOffset\n            }\n          default:\n            throw new Error('invalid target element given')\n        }\n      default:\n        throw new Error('invalid coordinate system given')\n    }\n  }\n\n  function fromLocalTo (\n    System:'viewport'|'document', originalPosition:Position, Source?:Element\n  ):Position {\n    switch (true) {\n      case (originalPosition == null):\n        throw new Error('no \"Position\" given')\n      case (typeof originalPosition.left !== 'number') && ! (originalPosition.left as Number instanceof Number):\n      case (typeof originalPosition.top  !== 'number') && ! (originalPosition.top  as Number instanceof Number):\n        throw new Error('invalid \"Position\" given')\n    }\n\n    let SourcePositionInViewport:Position, leftPosition:number, topPosition:number\n    switch (true) {\n      case (Source == null):\n        throw new Error('no source element given')\n      case (Source instanceof Element):\n        let computedStyle = window.getComputedStyle(Source as Element)\n\n        let leftOffset = parseFloat(computedStyle.borderLeftWidth)\n        let topOffset  = parseFloat(computedStyle.borderTopWidth)\n\n        SourcePositionInViewport = (Source as Element).getBoundingClientRect()\n        leftPosition = SourcePositionInViewport.left + leftOffset\n        topPosition  = SourcePositionInViewport.top  + topOffset\n        break\n      default:\n        throw new Error('invalid source element given')\n    }\n\n    switch (System) {\n      case null: case undefined:\n        throw new Error('no coordinate system given')\n      case 'viewport':\n        return {\n          left:originalPosition.left + leftPosition,\n          top:  originalPosition.top + topPosition\n        }\n      case 'document':\n        return {\n          left:originalPosition.left + leftPosition + window.scrollX,\n          top:  originalPosition.top + topPosition  + window.scrollY\n        }\n// @ts-ignore the following check is for non-TypeScript applications only\n      case 'local':\n        return { left:originalPosition.left, top:originalPosition.top }\n      default:\n        throw new Error('invalid coordinate system given')\n    }\n  }\n\n\n\n  export default {\n    fromViewportTo,\n    fromDocumentTo,\n    fromLocalTo\n  }\n"],"names":[],"mappings":"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"}