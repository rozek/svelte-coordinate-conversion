{"version":3,"file":"svelte-coordinate-conversion.js","sources":["../src/svelte-coordinate-conversion.ts"],"sourcesContent":["//----------------------------------------------------------------------------//\n//                        Svelte Coordinate Conversion                        //\n//----------------------------------------------------------------------------//\n\n  type Position = { left:number, top:number }\n\n  function fromViewportTo (\n    System:'document'|'local', originalPosition:Position, Target?:Element\n  ):Position {\n    switch (true) {\n      case (originalPosition == null):\n        throw new Error('no \"Position\" given')\n      case (typeof originalPosition.left !== 'number') && ! (originalPosition.left as Number instanceof Number):\n      case (typeof originalPosition.top  !== 'number') && ! (originalPosition.top  as Number instanceof Number):\n        throw new Error('invalid \"Position\" given')\n    }\n\n    switch (System) {\n      case null: case undefined:\n        throw new Error('no coordinate system given')\n// @ts-ignore the following check is for non-TypeScript applications only\n      case 'viewport':\n        return { left:originalPosition.left, top:originalPosition.top }\n      case 'document':\n        return {\n          left:originalPosition.left + window.scrollX,\n          top:  originalPosition.top + window.scrollY\n        }\n      case 'local':\n        switch (true) {\n          case (Target == null):\n            throw new Error('no target element given')\n          case (Target instanceof Element):\n            let computedStyle = window.getComputedStyle(Target as Element)\n\n            let leftOffset = parseFloat(computedStyle.borderLeftWidth)\n            let topOffset  = parseFloat(computedStyle.borderTopWidth)\n\n            let TargetPositionInViewport = (Target as Element).getBoundingClientRect()\n            return {\n              left:originalPosition.left - TargetPositionInViewport.left - leftOffset,\n              top:  originalPosition.top - TargetPositionInViewport.top  - topOffset\n            }\n          default:\n            throw new Error('invalid target element given')\n        }\n      default:\n        throw new Error('invalid coordinate system given')\n    }\n  }\n\n  function fromDocumentTo (\n    System:'viewport'|'local', originalPosition:Position, Target?:Element\n  ):Position {\n    switch (true) {\n      case (originalPosition == null):\n        throw new Error('no \"Position\" given')\n      case (typeof originalPosition.left !== 'number') && ! (originalPosition.left as Number instanceof Number):\n      case (typeof originalPosition.top  !== 'number') && ! (originalPosition.top  as Number instanceof Number):\n        throw new Error('invalid \"Position\" given')\n    }\n\n    switch (System) {\n      case null: case undefined:\n        throw new Error('no coordinate system given')\n      case 'viewport':\n        return {\n          left:originalPosition.left - window.scrollX,\n          top:  originalPosition.top - window.scrollY\n        }\n// @ts-ignore the following check is for non-TypeScript applications only\n      case 'document':\n        return { left:originalPosition.left, top:originalPosition.top }\n      case 'local':\n        switch (true) {\n          case (Target == null):\n            throw new Error('no target element given')\n          case (Target instanceof Element):\n            let computedStyle = window.getComputedStyle(Target as Element)\n\n            let leftOffset = parseFloat(computedStyle.borderLeftWidth)\n            let topOffset  = parseFloat(computedStyle.borderTopWidth)\n\n            let TargetPositionInViewport = (Target as Element).getBoundingClientRect()\n            return {\n              left:originalPosition.left + window.scrollX - TargetPositionInViewport.left - leftOffset,\n              top:  originalPosition.top + window.scrollY - TargetPositionInViewport.top  - topOffset\n            }\n          default:\n            throw new Error('invalid target element given')\n        }\n      default:\n        throw new Error('invalid coordinate system given')\n    }\n  }\n\n  function fromLocalTo (\n    System:'viewport'|'document', originalPosition:Position, Source?:Element\n  ):Position {\n    switch (true) {\n      case (originalPosition == null):\n        throw new Error('no \"Position\" given')\n      case (typeof originalPosition.left !== 'number') && ! (originalPosition.left as Number instanceof Number):\n      case (typeof originalPosition.top  !== 'number') && ! (originalPosition.top  as Number instanceof Number):\n        throw new Error('invalid \"Position\" given')\n    }\n\n    let SourcePositionInViewport:Position, leftPosition:number, topPosition:number\n    switch (true) {\n      case (Source == null):\n        throw new Error('no source element given')\n      case (Source instanceof Element):\n        let computedStyle = window.getComputedStyle(Source as Element)\n\n        let leftOffset = parseFloat(computedStyle.borderLeftWidth)\n        let topOffset  = parseFloat(computedStyle.borderTopWidth)\n\n        SourcePositionInViewport = (Source as Element).getBoundingClientRect()\n        leftPosition = SourcePositionInViewport.left + leftOffset\n        topPosition  = SourcePositionInViewport.top  + topOffset\n        break\n      default:\n        throw new Error('invalid source element given')\n    }\n\n    switch (System) {\n      case null: case undefined:\n        throw new Error('no coordinate system given')\n      case 'viewport':\n        return {\n          left:originalPosition.left + leftPosition,\n          top:  originalPosition.top + topPosition\n        }\n      case 'document':\n        return {\n          left:originalPosition.left + leftPosition + window.scrollX,\n          top:  originalPosition.top + topPosition  + window.scrollY\n        }\n// @ts-ignore the following check is for non-TypeScript applications only\n      case 'local':\n        return { left:originalPosition.left, top:originalPosition.top }\n      default:\n        throw new Error('invalid coordinate system given')\n    }\n  }\n\n\n\n  export default {\n    fromViewportTo,\n    fromDocumentTo,\n    fromLocalTo\n  }\n"],"names":["fromViewportTo","System","originalPosition","Target","Error","left","Number","top","undefined","window","scrollX","scrollY","Element","computedStyle","getComputedStyle","leftOffset","parseFloat","borderLeftWidth","topOffset","borderTopWidth","TargetPositionInViewport","getBoundingClientRect","fromDocumentTo","fromLocalTo","Source","SourcePositionInViewport","leftPosition","topPosition"],"mappings":"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"}